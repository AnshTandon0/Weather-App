(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{jSc6:function(e,n,t){"use strict";t.r(n),n.default='<ion-header>\r\n    <ion-toolbar>\r\n        <ion-buttons slot="start">\r\n            <ion-menu-button></ion-menu-button>\r\n        </ion-buttons>\r\n    </ion-toolbar>\r\n</ion-header>\r\n<ion-content class="ion-padding">\r\n    <ion-grid *ngIf="issued_documents" [fixed]="true">\r\n        <ion-row *ngIf="!isTimeout">\r\n            <ion-col size-xl="10" size="12">\r\n                <ion-text color="tertiary" mode="ios">\r\n                    <h2><strong>\r\n                        {{"You have" | translate}} {{issued_documents.length==0?\'no\':issued_documents.length}} {{"issued documents" | translate}}\r\n                    </strong>\r\n                        <ion-button *ngIf="!deviceSize" mode="ios" size="small" (click)="refreshIssuedDocList()" class="ion-float-end ion-no-margin-top ion-no-padding-top" color="light" shape="round">\r\n                            <ion-icon name="refresh-outline"></ion-icon>\r\n                        </ion-button>\r\n                    </h2>\r\n                </ion-text>\r\n                <ion-text>\r\n                    <h4>{{"DigiLocker \'Issued Documents\' are at par with original documents as per IT ACT, 2000" | translate}}</h4>\r\n                </ion-text>\r\n            </ion-col>\r\n            <ion-col size-xl="2" *ngIf="deviceSize">\r\n                <ion-button mode="ios" size="small" (click)="changeView()" class="ion-float-end ion-margin-top" color="light" shape="round" title="{{gridView?\'Click for List\':\'Click for Grid\'}}">\r\n                    <ion-icon name="{{gridView?\'grid-outline\':\'list-outline\'}}"></ion-icon>\r\n\r\n                </ion-button>\r\n            </ion-col>\r\n        </ion-row>\r\n        <ion-row *ngIf="issued_documents && issued_documents.length > 10" class="ion-no-margin-top">\r\n            <ion-col>\r\n                <ion-text>\r\n                    <ion-searchbar [(ngModel)]="filterTerm" placeholder="Search your issued documents" animated="true">\r\n                    </ion-searchbar>\r\n                </ion-text>\r\n            </ion-col>\r\n        </ion-row>\r\n\r\n        <ion-row *ngIf="issued_documents.length > 0">\r\n\r\n            <ion-col size="12" class="ion-no-padding">\r\n\r\n                <div class="msplrCard" [style]="gridView?\'\':\'width:30% !important;\'" *ngFor="let issuedDocs of issued_documents | filter:filterTerm">\r\n\r\n                    <ion-card mode="ios" class="ion-no-margin  {{gridView?\'ion-no-padding\':\'ion-padding\'}}" title="{{issuedDocs.docDescription}}">\r\n\r\n                        <ion-item lines="none">\r\n                            <ion-avatar slot="start" (click)="viewDocuments(issuedDocs)">\r\n                                <img [lazyLoad]="\'https://img1.digitallocker.gov.in/public/assets/logo/issuers/\'+issuedDocs.org_id+\'.png\'" alt="{{issuedDocs.docDescription}}" [defaultImage]="loadingImg" [errorImage]="cardErrImg" offset="100">\r\n\r\n                            </ion-avatar>\r\n                            <ion-label (click)="viewDocuments(issuedDocs)">\r\n                                <h3 class="ion-text-wrap ion-no-margin">\r\n                                    {{issuedDocs.docDescription}}\r\n\r\n                                </h3>\r\n\r\n                                <p class="ion-text-wrap" title=" {{(issuedDocs.uri.split(\'-\')[1]==\'ADHAR\')?\'************\':issuedDocs.uri.split(\'-\')[2]}}">\r\n                                    {{(issuedDocs.uri.split(\'-\')[1]==\'ADHAR\')?\'************\':issuedDocs.uri.split(\'-\')[2]}}\r\n                                </p>\r\n\r\n                            </ion-label>\r\n\r\n                            <ion-label *ngIf="gridView && deviceSize" lines="none" (click)="viewDocuments(issuedDocs)">\r\n                                <ion-label>\r\n                                    <h3 class="ion-text-wrap ion-no-margin" title="{{issuedDocs.orgName}}" color="medium">{{issuedDocs.orgName}}</h3>\r\n                                    <p class="ion-text-wrap" title="{{issuedDocs.modified_on}}">{{issuedDocs.modified_on}}</p>\r\n                                </ion-label>\r\n                            </ion-label>\r\n                            <ion-buttons slot="end" *ngIf="gridView">\r\n                                <ion-button *ngIf="issuedDocs.doc_type_id==\'ADHAR\'" color="medium" size="small">\r\n                                    <ion-icon name="download-outline" style="color:#fff;"></ion-icon>\r\n                                </ion-button>\r\n                                <ion-button *ngIf="issuedDocs.doc_type_id!=\'ADHAR\'" color="medium" title="Download" size="small" (click)="presentPopover($event,[issuedDocs.dataType.pdf?\'PDF\':null,issuedDocs.dataType.xml?\'XML\':null,issuedDocs.dataType.json?\'JSON\':null],\'download\',issuedDocs)">\r\n                                    <ion-icon name="download-outline"></ion-icon>\r\n                                </ion-button>\r\n                                <ion-button color="medium" title="More" size="small" (click)="presentPopover($event,[\'REFRESH\',issuedDocs.delete?\'DELETE\':null],\'action\',issuedDocs)">\r\n                                    <ion-icon name="ellipsis-vertical"></ion-icon>\r\n                                </ion-button>\r\n                            </ion-buttons>\r\n                        </ion-item>\r\n                        <ion-item lines="none" (click)="viewDocuments(issuedDocs)" *ngIf="!gridView">\r\n                            <ion-label>\r\n                                <p class="ion-text-wrap" title="{{issuedDocs.orgName}}">{{issuedDocs.orgName}}</p>\r\n                            </ion-label>\r\n                        </ion-item>\r\n                        <ion-row *ngIf="!gridView">\r\n                            <ion-col size-md="9" (click)="viewDocuments(issuedDocs)">\r\n\r\n                            </ion-col>\r\n                            <ion-col size-md="3">\r\n                                <ion-buttons>\r\n                                    <ion-button *ngIf="issuedDocs.doc_type_id==\'ADHAR\'" color="medium" size="small">\r\n                                        <ion-icon name="download-outline" style="color:#fff;"></ion-icon>\r\n                                    </ion-button>\r\n                                    <ion-button *ngIf="issuedDocs.doc_type_id!=\'ADHAR\'" color="medium" title="Download" size="small" (click)="presentPopover($event,[issuedDocs.dataType.pdf?\'PDF\':null,issuedDocs.dataType.xml?\'XML\':null,issuedDocs.dataType.json?\'JSON\':null],\'download\',issuedDocs)">\r\n                                        <ion-icon name="download-outline"></ion-icon>\r\n                                    </ion-button>\r\n                                    <ion-button color="medium" title="More" size="small" (click)="presentPopover($event,[\'REFRESH\',issuedDocs.delete?\'DELETE\':null],\'action\',issuedDocs)">\r\n                                        <ion-icon name="ellipsis-vertical"></ion-icon>\r\n                                    </ion-button>\r\n                                </ion-buttons>\r\n                            </ion-col>\r\n                        </ion-row>\r\n                    </ion-card>\r\n                </div>\r\n            </ion-col>\r\n        </ion-row>\r\n        <ion-row *ngIf="!this.isVerifiedUser">\r\n            <ion-col class="ion-text-center">\r\n                To get best value from DigiLocker, verify your Aadhaar to enable more authentic document access.\r\n                <ion-text color="primary" class="cursor" routerLink="/verify-aadhaar" routerDirection="root"> Verify now </ion-text>\r\n            </ion-col>\r\n        </ion-row>\r\n        <ion-row *ngIf="issued_documents.length == 0">\r\n\r\n            <ion-col size-md="8" offset="2">\r\n                <ion-row class="ion-no-margin">\r\n                    <ion-col class="ion-text-center">\r\n                        <img width="300px" [src]="isTimeout?maintenanceImg:\'https://img1.digitallocker.gov.in/assets/img/icons/empty-issued-doc.svg\'">\r\n                    </ion-col>\r\n                </ion-row>\r\n                <ion-row class="ion-no-margin" *ngIf="!isTimeout">\r\n                    <ion-col class="ion-text-center">\r\n                        <ion-title color="dark">\r\n                            <h1>You haven\'t issued any documents yet...</h1>\r\n                        </ion-title>\r\n                        <ion-title>\r\n                            <h3>Let\'s get some issued documents</h3>\r\n                        </ion-title>\r\n                        <ion-title class="ion-margin-top">\r\n                            <ion-button class="text-center" routerLink="/dashboard">Get Issued Documents Now</ion-button>\r\n                        </ion-title>\r\n                    </ion-col>\r\n                </ion-row>\r\n                <ion-row class="ion-no-margin" *ngIf="isTimeout">\r\n                    <ion-col class="ion-text-center">\r\n                        <ion-text color="dark" class="ion-margin-top">\r\n                            <h1>We are under Scheduled Maintenance</h1>\r\n                        </ion-text>\r\n                        <ion-text class="cursor ion-margin-top" color="tertiary" routerLink="/home" routerDirection="root">\r\n                            <h1>Go to Home</h1>\r\n                        </ion-text>\r\n                    </ion-col>\r\n                </ion-row>\r\n            </ion-col>\r\n        </ion-row>\r\n\r\n    </ion-grid>\r\n    <ion-grid *ngIf="!issued_documents" [fixed]="true">\r\n        <ion-row>\r\n            <ion-col>\r\n                <div class="msplrCard" *ngFor="let issuedDocs of [].constructor(10)">\r\n                    <ion-card mode="ios" class="ion-no-margin ">\r\n                        <ion-item lines="none">\r\n                            <ion-avatar slot="start">\r\n                                <ion-skeleton-text animated></ion-skeleton-text>\r\n                            </ion-avatar>\r\n                            <ion-label>\r\n                                <h3 class="ion-text-wrap ion-no-margin">\r\n                                    <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>\r\n                                </h3>\r\n                                <p class="ion-text-wrap">\r\n                                    <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>\r\n                                </p>\r\n                            </ion-label>\r\n                            <ion-label lines="none">\r\n                                <ion-label>\r\n                                    <h3 class="ion-text-wrap ion-no-margin" color="medium">\r\n                                        <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>\r\n                                    </h3>\r\n                                    <p class="ion-text-wrap">\r\n                                        <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>\r\n                                    </p>\r\n                                </ion-label>\r\n                            </ion-label>\r\n                            <ion-icon name="ellipse" color="light"></ion-icon>\r\n                            <ion-icon name="ellipse" color="light"></ion-icon>\r\n                        </ion-item>\r\n                    </ion-card>\r\n                </div>\r\n            </ion-col>\r\n        </ion-row>\r\n    </ion-grid>\r\n</ion-content>'},l5zq:function(e,n,t){"use strict";t.r(n),n.default=".msplrCard {\n  cursor: pointer;\n  display: inline-block;\n  margin-right: 15px;\n  margin-top: 10px;\n  width: 100%;\n}\n\n.ion-text-wrap {\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.textWrap {\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.card-content-ios {\n  padding-top: 0px;\n}\n\nion-avatar {\n  width: 60px;\n  height: 60px;\n  --border-radius: 0px;\n}\n\nion-card:hover {\n  transform: translate(0, -4px);\n}\n\n@media only screen and (min-width: 768px) {\n  ion-searchbar {\n    padding-left: 0px;\n  }\n}"},xDMY:function(e,n,t){"use strict";t.r(n),t.d(n,"IssuedDocumentsPageModule",(function(){return C}));var o=t("mrSG"),i=t("fXoL"),s=t("ofXK"),r=t("tyNb"),a=t("9ans"),l=t("AytR"),d=t("sRcL"),c=t("TEn/"),u=t("bFEu"),h=t("kmsT"),m=t("2AYQ"),p=t("b65m"),g=t("HRk4"),b=t("Jr/8"),w=t("gamo"),f=t("jhN1"),D=t("nJp/");let x=class{constructor(e,n,t,o,i,s,r,a,d){this.ajax=e,this.modalController=n,this.sanitizer=t,this.auth=o,this.navCtlr=i,this.alertCtrl=s,this.popoverCtrl=r,this.platform=a,this.titleService=d,this.deviceSize=this.platform.isLandscape(),this.cardErrImg=l.a.cardErrImg,this.loadingImg=l.a.loadingImg,this.issued_documents=null,this.isVerifiedUser=this.auth.isVerified(),this.profile=null,this.ionError=!1,this.gridView=!0,this.maintenanceImg=l.a.maintenanceImg,this.isTimeout=!1,this.issuedDocRefreshing=!1,this.prevDate=(new Date).toLocaleDateString("en-UK").replace(/\//g,"-"),this.profile=this.auth.userProfile(),this.isVerifiedUser=l.a.verified_user_type.includes(this.profile.user_type)}ionViewDidEnter(){this.titleService.setTitle("Issued Documents")}ngOnInit(){}ionViewWillEnter(){this.profile=this.auth.userProfile(),this.getIssuedDocuments()}changeView(){return Object(o.b)(this,void 0,void 0,(function*(){this.gridView=!this.gridView}))}getIssuedDocuments(){return Object(o.b)(this,void 0,void 0,(function*(){let e=this.ajax.getIssuedDoc(),n=e||[];yield this.ajax.postMethod(l.a.issued_documents,"",{}).subscribe(e=>{null==e.status?(this.issued_documents=[].concat(n,e),this.issued_documents.sort((e,n)=>n.metadata-e.metadata),this.isVerifiedUser||this.issued_documents.length||this.navCtlr.navigateRoot("verify-aadhaar")):(this.isTimeout=!0,null==e.name&&"TimeoutError"!=e.name&&this.ajax.showToast("Internal server error.",3e3,"warning","bottom"),this.issued_documents=[])})}))}viewDocuments(e,n){return Object(o.b)(this,void 0,void 0,(function*(){this.ajax.showLoader();let t="1"==e.metadata&&["ADHAR"].includes(e.doc_type_id)?l.a.metadata:l.a.pdfdata;this.ajax.postMethod(t,encodeURI("URI="+e.uri),{}).subscribe(t=>{if(this.ajax.hideLoader(),null!=t.status&&1!=t.status||t==[])null!=t.message&&this.ajax.showToast(t.message),null!=t.status_code&&601==t.status_code&&"ADHAR"==n.split("-")[1]&&this.navCtlr.navigateForward("/issued-documents/aadhar");else{let n=["1","2","3","4","5"];"1"==e.metadata&&n.includes(t.templateId)&&"ADHAR"==e.doc_type_id?this.docTemplates(t,e):void 0!==t.DocContent?(t.templateId=9999,this.docTemplates(t,e)):this.ajax.showToast("Document Content is invalid.",3e3,"warning","bottom")}})}))}refreshDocument(e){if("ADHAR"==e.uri.split("-")[1])this.navCtlr.navigateForward("issued-documents/aadhar");else{this.ajax.showLoader();let n=l.a.refreshIssuedDoc;this.ajax.postMethod(n,encodeURI("URI="+e.uri),{}).subscribe(n=>{this.ajax.hideLoader(),n.status||void 0!==n.DocContent?(n.templateId=9999,this.docTemplates(n,e),this.ajax.showToast(e.docDescription+" updated successfully.",3e3,"success","bottom")):this.ajax.showToast(n.message)})}}deleteDocument(e){return Object(o.b)(this,void 0,void 0,(function*(){(yield this.deleteDocAlert(e))&&this.deleteDocumentRequest(e)}))}deleteDocAlert(e){return Object(o.b)(this,void 0,void 0,(function*(){return new Promise(n=>Object(o.b)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({message:"You are trying to delete the <b>"+e.docDescription+"</b> which was earlier fetched by you on <b>"+e.issuedOn+"</b>. Are you sure you want to permanently delete this document?",buttons:[{text:"Cancel",role:"cancel",cssClass:"primary",handler:()=>n(!1)},{text:"Delete",cssClass:"danger",handler:()=>n(!0)}]})).present()})))}))}deleteDocumentRequest(e){return Object(o.b)(this,void 0,void 0,(function*(){yield this.ajax.showLoader();let n=l.a.deleteIssuedDoc;yield this.ajax.deleteMethod(n,encodeURI("URI="+e.uri)).subscribe(n=>{this.ajax.hideLoader(),n.status&&this.getIssuedDocuments(),this.ajax.showToast(e.docDescription+" "+n.message,3e3,"success","bottom")})}))}docTemplates(e,n){return Object(o.b)(this,void 0,void 0,(function*(){let t=9999==e.templateId?this.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+e.DocContent.trim()):"";const o=yield this.modalController.create({component:"1"==e.templateId?h.a:"2"==e.templateId?m.a:"3"==e.templateId?p.a:"4"==e.templateId?g.a:"5"==e.templateId?b.a:w.a,cssClass:9999!==e.templateId?["4","5"].includes(e.templateId)?"verticalCard":"cardView":"",swipeToClose:!0,mode:"ios",componentProps:{metaDataResp:e,issuedDoc:9999==e.templateId?e:this.arrangeMetaViewData(e),docDetails:n,pdfHtml:t}});return yield o.present()}))}arrangeMetaViewData(e){let n=e.viewPosition,t=[];return Object.keys(e).map((function(o){let i=e[o];n.forEach(e=>{if(void 0!==e[o]&&"-"!=i){let n=e[o].split("|");null==t[n[0]]&&(t[n[0]]={label:null,value:[]}),void 0!==n[1]?t[n[0]].value[n[1]]=[i]:t[n[0]].value[0]=[i],void 0!==e.prefix&&(t[n[0]].label=e.prefix)}})})),t.filter((function(e){return e}))}downloadPdf(e){this.ajax.showLoader();let n=encodeURI("URI="+e);this.ajax.postMethod(l.a.pdfdata,n,{}).subscribe(n=>{this.ajax.hideLoader(),void 0!==n.DocContent?this.downloadFile(n.DocContent,"pdf",e):(null!=n.message&&(null!=n.status_code?601!==n.status_code&&this.ajax.showToast(n.message):this.ajax.showToast(n.message)),null!=n.status_code&&601==n.status_code&&"ADHAR"==e.split("-")[1]&&this.navCtlr.navigateForward("/issued-documents/aadhar"))})}downloadJson(e){this.ajax.showLoader();let n=encodeURI("URI="+e);this.ajax.postMethod(l.a.jsondata,n,{}).subscribe(n=>{this.ajax.hideLoader(),void 0!==n.DataContent&&this.downloadFile(n.DataContent,"json",e)})}downloadXml(e){this.ajax.showLoader();let n=encodeURI("URI="+e);this.ajax.postMethod(l.a.xmldata,n,{}).subscribe(n=>{this.ajax.hideLoader(),void 0!==n.DataContent&&this.downloadFile(n.DataContent,"xml",e)})}downloadFile(e,n,t){let o="data:application/pdf;base64,"+e;t=t+"."+n,"pdf"!=n&&(o="data:text/plain;base64,"+e);var i=document.createElement("a");i.href=o,i.download=t,i.click()}verifyAadhar(){return Object(o.b)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:u.a,cssClass:"my-custom-class",swipeToClose:!0});return yield e.present()}))}presentPopover(e,n=[],t=null,i=null){return Object(o.b)(this,void 0,void 0,(function*(){const o=yield this.popoverCtrl.create({component:D.a,cssClass:"my-custom-class",event:e,translucent:!0,mode:"ios",componentProps:{labels:n},animated:!0});yield o.present(),yield o.onDidDismiss().then(e=>{if(null!=e.data){let n=e.data.label;"download"==t?"PDF"==n?this.downloadPdf(i.uri):"XML"==n?this.downloadXml(i.uri):"JSON"==n?this.downloadJson(i.uri):this.ajax.showToast("No action"):"action"==t&&("REFRESH"==n?this.refreshDocument(i):"DELETE"==n?this.deleteDocument(i):this.ajax.showToast("No action"))}})}))}refreshIssuedDocList(){this.issuedDocRefreshing=!0,this.ajax.postMethod(l.a.refreshIssuedDocList,"",{}).subscribe(e=>{this.issuedDocRefreshing=!1,null==e.status&&e.length>0?(this.issued_documents=e,this.ajax.showToast("Issued documents list refreshed.",3e3,"primary","bottom")):this.ajax.showToast("Please try again.",3e3,"danger","bottom")})}};x.ctorParameters=()=>[{type:d.a},{type:c.h},{type:f.b},{type:a.a},{type:c.i},{type:c.a},{type:c.l},{type:c.k},{type:f.d}],x=Object(o.c)([Object(i.n)({selector:"app-issued-documents",template:Object(o.f)(t("jSc6")).default,styles:[Object(o.f)(t("l5zq")).default]})],x);const v=[{path:"",component:x},{path:"temp1",loadChildren:()=>t.e(109).then(t.bind(null,"XWqu")).then(e=>e.Temp1PageModule)},{path:"temp2",loadChildren:()=>t.e(110).then(t.bind(null,"OL8j")).then(e=>e.Temp2PageModule)},{path:"temp3",loadChildren:()=>t.e(111).then(t.bind(null,"Au3K")).then(e=>e.Temp3PageModule)},{path:"temp4",loadChildren:()=>t.e(112).then(t.bind(null,"Ikcr")).then(e=>e.Temp4PageModule)},{path:"temp-pdf",loadChildren:()=>t.e(108).then(t.bind(null,"oT21")).then(e=>e.TempPdfPageModule)},{path:"temp5",loadChildren:()=>t.e(113).then(t.bind(null,"0hMa")).then(e=>e.Temp5PageModule)},{path:"aadhar",loadChildren:()=>t.e(4).then(t.bind(null,"gYfu")).then(e=>e.UpdateAadharPageModule)}];let y=class{};y=Object(o.c)([Object(i.M)({imports:[r.i.forChild(v)],exports:[r.i]})],y);var I=t("3Pt+"),j=t("cZdB"),T=t("sYmb"),k=t("wf0l");let C=class{};C=Object(o.c)([Object(i.M)({imports:[s.b,y,I.b,c.d,j.a,T.b.forChild(),k.a],declarations:[x]})],C)}}]);