(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"9d0f":function(n,e,o){"use strict";o.r(e),e.default='<ion-header>\r\n    <ion-toolbar>\r\n        <ion-title></ion-title>\r\n    </ion-toolbar>\r\n</ion-header>\r\n<ion-content class="ion-padding">\r\n    <ion-grid [fixed]="true">\r\n        <ion-toolbar>\r\n            <ion-title color="tertiary">\r\n                <strong>Create your Health ID </strong>\r\n            </ion-title>\r\n            <ion-buttons slot="start">\r\n                <ion-button (click)="dismiss()" color="dark" fill="clear" shape="round" size="small">\r\n                    <ion-icon ios="arrow-back" md="arrow-back"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-grid>\r\n    <ion-grid [fixed]="true">\r\n        <ion-row>\r\n            <ion-col size="12" size-xl="9">\r\n                <ion-card class="ion-padding ion-no-margin" mode="ios">\r\n                    <form [formGroup]="uhidMobileForm" (ngSubmit)="submitUhidMobileForm()" novalidate>\r\n\r\n                        \x3c!-- <ion-row>\r\n              <ion-col size-md="3" size="12">\r\n                <ion-item lines="none">\r\n                  <ion-label>Upload Photo</ion-label>\r\n                </ion-item>\r\n              </ion-col>\r\n              <ion-col size-md="9" size="12">\r\n                <ion-item lines="none">\r\n                  <img [src]="profilePhoto?profilePhoto:\'assets/img/blank_profile_2.jpg\'" width="100" height="120" />\r\n                  <ion-icon *ngIf="profilePhoto" class="cursor" name="close-circle-outline" color="danger" (click)="clearPhoto()"></ion-icon>\r\n                  <ion-input type="file" name="profilePhoto" id="profilePhoto" accept="image/png, image/jpg ,image/jpeg" formControlName="profilePhoto" (change)="setProfilePhoto($event)" ></ion-input>\r\n                </ion-item>\r\n              </ion-col>\r\n            </ion-row> --\x3e\r\n\r\n                        <ion-row *ngIf="!deviceSize" class="ion-margin-bottom">\r\n                            <ion-col size-xl="2" size="12">\r\n                                <input type="file" name="file" id="profilePhoto" #profilePhoto accept="image/png, image/jpg ,image/jpeg" formControlName="profilePhoto" title="Upload Photo" hidden/>\r\n                                <ion-thumbnail class="ion-margin-start centerImg">\r\n                                    \x3c!-- <ion-fab *ngIf="profilePhotoShow" vertical="top" horizontal="end">\r\n                            <ion-icon class="cursor" name="close-circle" color="danger" (click)="clearPhoto()"></ion-icon>\r\n                        </ion-fab> --\x3e\r\n                                    <ion-img [src]="profilePhotoShow?profilePhotoShow:\'assets/img/blank_profile_2.jpg\'"></ion-img>\r\n                                    <ion-button size="small" expand="block" class="primary" mode="ios" (click)="setProfilePhoto(profilePhoto)">\r\n                                        <ion-icon name="camera"></ion-icon> &nbsp; {{profilePhotoShow?\'Change\':\'Upload\'}}\r\n\r\n                                    </ion-button>\r\n                                </ion-thumbnail>\r\n                            </ion-col>\r\n                        </ion-row>\r\n                        <ion-row>\r\n                            <ion-col size-xl="10">\r\n\r\n                                <ion-row>\r\n                                    <ion-col size-md="3" size="12" *ngIf="deviceSize">\r\n                                        <ion-item lines="none">\r\n                                            <ion-label>Full Name</ion-label>\r\n                                        </ion-item>\r\n                                    </ion-col>\r\n                                    <ion-col size-md="9" size="12">\r\n                                        <ion-item lines="full" mode="md" class="{{(deviceSize)?\'ion-margin-start ion-padding-start\' : \'ion-no-margin-start ion-no-padding-start\'}}">\r\n                                            <ion-label position="floating" *ngIf="!deviceSize">Full Name</ion-label>\r\n                                            <ion-input type="text" formControlName="firstName" [value]="fname" (keypress)="ajax.nameValidation($event)" minlength="3" maxlength="32" required #firstName>\r\n                                            </ion-input>\r\n                                        </ion-item>\r\n\r\n                                        <ion-text color="danger" class="ion-margin" *ngIf="isSubmitted && errorControl.firstName.errors?.required">\r\n                                            First Name is required\r\n                                        </ion-text>\r\n\r\n                                        <ion-text color="danger" *ngIf="errorControl.firstName.errors?.pattern">\r\n                                            First name contains only text\r\n                                        </ion-text>\r\n                                        <ion-text color="danger" *ngIf="errorControl.firstName.errors?.minlength">\r\n                                            First name cannot not be less than 3 characters\r\n                                        </ion-text>\r\n                                        <ion-text color="danger" *ngIf="errorControl.firstName.errors?.maxlength">\r\n                                            First name cannot not be more than 32 characters\r\n                                        </ion-text>\r\n                                    </ion-col>\r\n                                    <ion-col size-md="3" size="12" [hidden]="true">\r\n                                        <ion-item lines="full">\r\n                                            <ion-input type="text" formControlName="middleName" placeholder="Middle Name" (keypress)="ajax.nameValidation($event)" #middleName minlength="3" maxlength="32"></ion-input>\r\n                                        </ion-item>\r\n                                        <ion-text color="danger" *ngIf="errorControl.middleName.errors?.pattern">\r\n                                            Middle name contains only text\r\n                                        </ion-text>\r\n                                        <ion-text color="danger" *ngIf="errorControl.middleName.errors?.minlength">\r\n                                            Middle name cannot not be less than 3 characters\r\n                                        </ion-text>\r\n                                        <ion-text color="danger" *ngIf="errorControl.middleName.errors?.maxlength">\r\n                                            Middle name cannot not be more than 32 characters\r\n                                        </ion-text>\r\n\r\n                                    </ion-col>\r\n                                    <ion-col size-md="3" size="12" [hidden]="true">\r\n                                        <ion-item lines="full">\r\n                                            <ion-input type="text" formControlName="lastName" placeholder="Last Name" (keypress)="ajax.nameValidation($event)" #lastName minlength="3" maxlength="32">\r\n                                            </ion-input>\r\n                                        </ion-item>\r\n                                        <ion-text color="danger" *ngIf="errorControl.lastName.errors?.pattern">\r\n                                            Last name contains only text\r\n                                        </ion-text>\r\n                                        <ion-text color="danger" *ngIf="errorControl.lastName.errors?.minlength">\r\n                                            Last name cannot not be less than 3 characters\r\n                                        </ion-text>\r\n                                        <ion-text color="danger" *ngIf="errorControl.lastName.errors?.maxlength">\r\n                                            Last name cannot not be more than 32 characters\r\n                                        </ion-text>\r\n                                    </ion-col>\r\n\r\n                                </ion-row>\r\n                                <ion-row>\r\n                                    <ion-col size-md="3" size="12" *ngIf="deviceSize">\r\n                                        <ion-item lines="none">\r\n                                            <ion-label>Date of Birth</ion-label>\r\n                                        </ion-item>\r\n                                    </ion-col>\r\n                                    <ion-col size-md="9" size="12">\r\n                                        <ion-item lines="full" class="{{(deviceSize)?\'ion-margin-start ion-padding-start\' : \'ion-no-margin-start ion-no-padding-start\'}}">\r\n                                            <ion-input type="date" placeholder="dd/mm/yyyy" [min]="minDate" [max]="maxDate" displayFormat="DD MMMM YYYY" formControlName="dateOfBirth" [value]="dob" required #dateOfBirth></ion-input>\r\n                                        </ion-item>\r\n                                        <p *ngIf="isSubmitted && errorControl.dateOfBirth.errors?.required">\r\n                                            <ion-text color="danger" class="ion-margin">\r\n                                                DOB is required\r\n                                            </ion-text>\r\n                                        </p>\r\n                                    </ion-col>\r\n                                </ion-row>\r\n\r\n\r\n                            </ion-col>\r\n                            <ion-col size-xl="2" size="12" *ngIf="deviceSize">\r\n                                <input type="file" name="file" id="profilePhoto" #profilePhoto accept="image/png, image/jpg ,image/jpeg" formControlName="profilePhoto" title="Upload Photo" hidden/>\r\n                                <ion-thumbnail class="ion-margin-start centerImg">\r\n                                    \x3c!-- <ion-fab *ngIf="profilePhotoShow" vertical="top" horizontal="end">\r\n                                        <ion-icon class="cursor" name="close-circle" color="danger" (click)="clearPhoto()"></ion-icon>\r\n                                    </ion-fab> --\x3e\r\n                                    <img [src]="profilePhotoShow?profilePhotoShow:\'assets/img/blank_profile_2.jpg\'">\r\n                                    <ion-button size="small" expand="block" class="primary" mode="ios" (click)="setProfilePhoto(profilePhoto)">\r\n                                        <ion-icon name="camera"></ion-icon> &nbsp; {{profilePhotoShow?\'Change\':\'Upload\'}}\r\n\r\n                                    </ion-button>\r\n                                </ion-thumbnail>\r\n                            </ion-col>\r\n                        </ion-row>\r\n                        <ion-row>\r\n                            <ion-col size-xl="3" size="12" *ngIf="deviceSize">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>Gender</ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size-xl="9" size="12" class=" ion-padding-start">\r\n                                <ion-item lines="full" mode="md">\r\n                                    <ion-radio-group formControlName="gender" [value]="genVal" #gender required class="ion-no-padding-start">\r\n                                        <ion-row class="ion-no-padding-start">\r\n                                            <ion-col>\r\n                                                <ion-item lines="none" class="ion-no-padding">\r\n                                                    <ion-label>{{"Male" | translate}}</ion-label>\r\n                                                    <ion-radio slot="start" value="M" ></ion-radio>\r\n                                                </ion-item>\r\n                                            </ion-col>\r\n                                            <ion-col>\r\n                                                <ion-item lines="none" class="ion-no-padding">\r\n                                                    <ion-label>{{"Female" | translate}}</ion-label>\r\n                                                    <ion-radio slot="start" value="F"></ion-radio>\r\n                                                </ion-item>\r\n                                            </ion-col>\r\n                                            <ion-col>\r\n                                                <ion-item lines="none" class="ion-no-padding">\r\n                                                    <ion-label>{{"Other" | translate}}</ion-label>\r\n                                                    <ion-radio slot="start" value="O"></ion-radio>\r\n                                                </ion-item>\r\n                                            </ion-col>\r\n                                            <ion-col>\r\n                                                <ion-item lines="none" class="ion-no-padding">\r\n                                                    <ion-label>{{"Not Disclose" | translate}}</ion-label>\r\n                                                    <ion-radio slot="start" value="U"></ion-radio>\r\n                                                </ion-item>\r\n                                            </ion-col>\r\n                                        </ion-row>\r\n                                    </ion-radio-group>\r\n                                </ion-item>\r\n                                <p *ngIf="isSubmitted && errorControl.gender.errors?.required">\r\n                                    <ion-text color="danger" class="ion-margin">\r\n                                        Gender is required\r\n                                    </ion-text>\r\n                                </p>\r\n                            </ion-col>\r\n                        </ion-row>\r\n                        <ion-row>\r\n                            <ion-col size-xl="3" size="12" *ngIf="deviceSize">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>Enter Health ID</ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size-xl="9" size="12" class="{{(deviceSize)?\'ion-padding-start\': \'ion-no-padding-start\'}}">\r\n                                <ion-item lines="full" mode="md">\r\n                                    <ion-label position="floating" *ngIf="!deviceSize">Enter Health ID</ion-label>\r\n                                    <ion-input type="text" formControlName="healthId" minlength="4" maxlength="32" required></ion-input>\r\n                                    <b>@ndhm</b>\r\n                                </ion-item>\r\n\r\n                                <ion-text color="danger" class="ion-margin" *ngIf="isSubmitted && errorControl.healthId.errors?.required">\r\n                                    Health ID is required\r\n                                </ion-text>\r\n\r\n                                <ion-text color="danger" *ngIf="errorControl.healthId.errors?.minlength">\r\n                                    Health ID could not be less than 4 characters\r\n                                </ion-text>\r\n                                <ion-text color="danger" *ngIf="errorControl.healthId.errors?.maxlength">\r\n                                    Health ID could not be more than 32 characters\r\n                                </ion-text>\r\n                                <ion-text color="danger" class="ion-margin" *ngIf="errorControl.healthId.errors?.pattern">\r\n                                    Only characters and numbers allowed.\r\n                                </ion-text>\r\n                                <br/>\r\n                                <small>Health ID must contain minimum 4 and maximum 32 characters, Can consist of alphabets, numbers and\r\n                  special character dot (.)</small>\r\n                            </ion-col>\r\n                        </ion-row>\r\n                        <ion-row>\r\n                            <ion-col size-md="3" size="5">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>States</ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size-md="3" size="7">\r\n                                <ion-select interface="popover" formControlName="stateCode" mode="md" [(ngModel)]="stCode" (ionChange)="getDistricts()">\r\n                                    <ion-select-option disabled value="">Select one</ion-select-option>\r\n                                    <ion-select-option *ngFor="let state of stateList" [value]="state.code">{{state.name}}\r\n                                    </ion-select-option>\r\n                                </ion-select>\r\n                                <p *ngIf="isSubmitted && errorControl.stateCode.errors?.required">\r\n                                    <ion-text color="danger" class="ion-margin">\r\n                                        State is required\r\n                                    </ion-text>\r\n                                </p>\r\n                            </ion-col>\r\n                            <ion-col size-md="2" size="5">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>Districts</ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size-md="4" size="7">\r\n                                <ion-select interface="popover" formControlName="districtCode" mode="md" [(ngModel)]="distCode" required>\r\n                                    <ion-select-option disabled value="">Select one</ion-select-option>\r\n                                    <ion-select-option *ngFor="let district of districtList" [value]="district.code"> {{district.name}}\r\n                                    </ion-select-option>\r\n                                </ion-select>\r\n                                <p *ngIf="isSubmitted && errorControl.districtCode.errors?.required">\r\n                                    <ion-text color="danger" class="ion-margin">\r\n                                        District is required\r\n                                    </ion-text>\r\n                                </p>\r\n                            </ion-col>\r\n                        </ion-row>\r\n                        <ion-button type="submit" color="primary" class="ion-float-right">Submit</ion-button>\r\n                    </form>\r\n                </ion-card>\r\n            </ion-col>\r\n        </ion-row>\r\n    </ion-grid>\r\n</ion-content>'},BbBG:function(n,e,o){"use strict";o.r(e),e.default="ion-thumbnail {\n  --size: 90px;\n}\nion-thumbnail ion-img {\n  padding: 2px;\n  border-radius: 12px;\n}\n.centerImg {\n  margin: auto;\n}"},"an/o":function(n,e,o){"use strict";o.r(e),o.d(e,"FormPageModule",(function(){return f}));var i=o("mrSG"),r=o("fXoL"),t=o("ofXK"),a=o("3Pt+"),l=o("TEn/"),s=o("sYmb"),d=o("tyNb"),c=o("sRcL"),m=o("AytR");let h=class{constructor(n,e,o,i,r){var t;this.formBuilder=n,this.ajax=e,this.navCtlr=o,this.router=i,this.platform=r,this.deviceSize=this.platform.isLandscape(),this.profileData=[],this.stateList=[],this.isSubmitted=!1,this.respMsg=null,this.fname=null,this.genVal=null,this.dob=null,this.districtList=[],this.profilePhotoShow=null,this.minDate=new Date("1935-01-01").toLocaleDateString("en-CA"),this.maxDate=(new Date).toLocaleDateString("en-CA"),this.txnIdToken=null===(t=this.router.getCurrentNavigation())||void 0===t?void 0:t.extras.state}ngAfterViewChecked(){this.uhidMobileForm.controls.firstName.valid||this.firstNameElement.setFocus()}ngOnInit(){null==this.txnIdToken?this.navCtlr.navigateRoot("/uhid/create-using-mobile"):(this.getProfileDetails(),this.getStateList(),this.getProfilePhoto()),this.validationArray={firstName:[{value:"",disabled:!1},[a.f.required,a.f.pattern("[A-Za-z? ]+$"),a.f.maxLength(32),a.f.minLength(3)]],middleName:[{value:"",disabled:!1},[a.f.pattern("[A-Za-z? ]+$"),a.f.maxLength(32),a.f.minLength(3)]],lastName:[{value:"",disabled:!1},[a.f.pattern("[A-Za-z? ]+$"),a.f.maxLength(32),a.f.minLength(3)]],dateOfBirth:[{value:"",disabled:!1},[a.f.required]],gender:[{value:"",disabled:!1},[a.f.required]],healthId:[{value:"",disabled:!1},[a.f.required,a.f.pattern("^[0-9A-Za-z]+$")]],stateCode:[{value:"",disabled:!1},[a.f.required]],districtCode:[{value:"",disabled:!1},[a.f.required]],profilePhoto:[{value:"",disabled:!1},[]]},this.uhidMobileForm=this.formBuilder.group(this.validationArray),this.DobValidator("dob")}getProfileDetails(){return Object(i.b)(this,void 0,void 0,(function*(){yield this.ajax.postMethod(m.a.profile,"",{}).subscribe(n=>{this.profileData=n,void 0!==this.profileData.full_name&&(this.fname=this.profileData.full_name),void 0!==this.profileData.dateOfBirth&&""!==this.profileData.dateOfBirth&&(this.dob=new Date(this.profileData.dateOfBirth).toLocaleDateString("en-CA")),void 0!==this.profileData.gender&&(this.genVal=this.profileData.gender)})}))}submitUhidMobileForm(){if(this.isSubmitted=!0,!this.uhidMobileForm.valid)return!1;{this.respMsg=null,this.uhidMobileForm.value.otp="",this.ajax.showLoader("");let n=new Date(this.uhidMobileForm.value.dateOfBirth).toLocaleDateString("en-EN").split("/"),e={"content-type":"application/json"},o=m.a.uhid_create_by_mobile,i={firstName:this.uhidMobileForm.get("firstName").value.trim(),middleName:this.uhidMobileForm.get("middleName").value.trim(),lastName:this.uhidMobileForm.get("lastName").value.trim(),yearOfBirth:n[2],dayOfBirth:n[1],monthOfBirth:n[0],gender:this.uhidMobileForm.get("gender").value.trim(),healthId:this.uhidMobileForm.get("healthId").value.trim(),stateCode:this.uhidMobileForm.get("stateCode").value,districtCode:this.uhidMobileForm.get("districtCode").value,txnId:this.txnIdToken.txnId,token:this.txnIdToken.token};if(this.profilePhotoShow){let n=this.profilePhotoShow.split(",");i.profilePhoto=n[1]}this.ajax.postMethod(o,i,e).subscribe(n=>{this.isSubmitted=!1,this.ajax.hideLoader(),null!=n.healthIdNumber&&(this.ajax.showToast("Your Health ID Number "+n.healthIdNumber+" is generated successfully,Your Health ID card is available in Issued Documents",3e3,"success","bottom"),this.navCtlr.navigateForward("issued-documents"))})}}DobValidator(n){return e=>{const o=e.controls[n];o.errors&&!o.errors.dobValidator||(this.maxDate>o.value&&this.minDate<o.value?o.setErrors(null):o.setErrors({dobValidator:!0}))}}getDate(n){let e=new Date(n.target.value).toISOString().substring(0,10);this.uhidMobileForm.get("dob").setValue(e,{onlyself:!0})}getStateList(){this.distCode=null,this.ajax.getMethod(m.a.uhid_state_district_ut+"states.json").subscribe(n=>{this.stateList=n})}getDistricts(){this.ajax.getMethod(m.a.uhid_state_district_ut+"districts/"+this.stCode+".json").subscribe(n=>{this.districtList=n})}setProfilePhoto(n){n.click();let e=this;n.onchange=function(){var o=n.files;if(o.length>0){var i=o[0];e.checkFileMimeType(i,n=>{if(i.type==n)if(console.log(i.size),i.size>5e4||i.size<2e4)e.ajax.showToast("File size must be of 20 KB to 50 KB.",3e3,"danger");else{var o=new FileReader;o.onload=n=>{e.profilePhotoShow=n.target.result},o.readAsDataURL(i)}else e.ajax.showToast("File format is not supported.",3e3,"danger")})}}}checkFileMimeType(n,e){return Object(i.b)(this,void 0,void 0,(function*(){var o=new FileReader;o.onload=function(n){for(var o=new Uint8Array(n.target.result).subarray(0,4),i="",r=0;r<o.length;r++)i+=o[r].toString(16);var t="unknown";switch(i){case"89504e47":t="image/png";break;case"47494638":case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":t="image/jpeg"}e(t)},o.readAsArrayBuffer(n)}))}clearPhoto(){this.profilePhotoShow=null}dismiss(){this.navCtlr.back()}get errorControl(){return this.uhidMobileForm.controls}getProfilePhoto(){return Object(i.b)(this,void 0,void 0,(function*(){yield this.ajax.postMethod(m.a.aadhaar_profile_pic,"",{}).subscribe(n=>{null!=n.photo&&n.photo&&(this.profilePhotoShow="data:image/png;base64,"+n.photo)})}))}};h.ctorParameters=()=>[{type:a.a},{type:c.a},{type:l.i},{type:d.g},{type:l.k}],Object(i.c)([Object(r.nb)("firstName")],h.prototype,"firstNameElement",void 0),h=Object(i.c)([Object(r.n)({selector:"app-form",template:Object(i.f)(o("9d0f")).default,styles:[Object(i.f)(o("BbBG")).default]})],h);const u=[{path:"",component:h}];let g=class{};g=Object(i.c)([Object(r.M)({imports:[d.i.forChild(u)],exports:[d.i]})],g);let f=class{};f=Object(i.c)([Object(r.M)({imports:[t.b,a.b,a.e,l.d,g,s.b.forChild()],declarations:[h]})],f)}}]);