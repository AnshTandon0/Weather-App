(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{JATV:function(e,n,o){"use strict";o.r(n),n.default=""},TMau:function(e,n,o){"use strict";o.r(n),n.default='<ion-header>\r\n    <ion-toolbar>\r\n        <ion-buttons slot="start">\r\n            <ion-menu-button></ion-menu-button>\r\n        </ion-buttons>\r\n        <ion-title>\r\n\r\n        </ion-title>\r\n    </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class="ion-padding">\r\n    <ion-grid [fixed]="true">\r\n        <ion-toolbar>\r\n            <ion-title color="tertiary">\r\n                <strong>{{"Add Nominee" | translate}}</strong></ion-title>\r\n            <ion-buttons slot="start">\r\n                <ion-button (click)="dismiss()" color="dark" fill="clear" shape="round" size="small">\r\n                    <ion-icon ios="arrow-back" md="arrow-back"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n\r\n        <ion-row>\r\n            <ion-col size="12" size-xl="8">\r\n                <ion-card class="ion-padding ion-no-margin" mode="ios">\r\n                    <ion-row>\r\n                        <ion-col class="ion-padding">\r\n                            <ion-text color="tertiary" class="ion-no-margin ion-padding-start ion-margin-start">\r\n                                <h3><strong> {{"Add Nominee to your Digilocker account" | translate}}</strong>\r\n                                </h3>\r\n                            </ion-text>\r\n                        </ion-col>\r\n                    </ion-row>\r\n\r\n                    <form [formGroup]="addNomineeForm" (ngSubmit)="submitAddNomineeForm()" novalidate>\r\n                        <ion-row>\r\n                            <ion-col size=12 size-xl="4" *ngIf="deviceSize">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>{{"Nominee Name" | translate}}</ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size=12 size-xl="8">\r\n                                <ion-item lines="full" mode="md">\r\n                                    <ion-label position="floating" *ngIf="!deviceSize">Nominee Name</ion-label>\r\n                                    <ion-input (keypress)="ajax.nameValidation($event)" maxlength="255" [attr.disabled]="otp" formControlName="name" type="text" #name required></ion-input>\r\n                                </ion-item>\r\n\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.name.errors?.required">\r\n                                    {{"Name" | translate}} {{"Req" | translate}}\r\n                                </ion-label>\r\n                                <ion-label color="danger" *ngIf="errorAddNomineeControl.name.errors?.pattern">\r\n                                    {{"NAME_Reg" | translate}}\r\n                                </ion-label>\r\n                            </ion-col>\r\n                        </ion-row>\r\n                        <ion-row>\r\n                            <ion-col size=12 size-xl="4" *ngIf="deviceSize">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>{{"DOB_Full" | translate}}</ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size=12 size-xl="8">\r\n                                <ion-item lines="full" mode="md">\r\n                                    <ion-label position="floating" *ngIf="!deviceSize">{{"DOB_Full" | translate}}</ion-label>\r\n                                    <ion-input placeholder="dd/mm/yyyy" [attr.disabled]="otp" type="date" [min]="minDate" [max]="maxDate" displayFormat="DD MMMM YYYY" (ionChange)="getDate($event)" formControlName="dob" required></ion-input>\r\n\r\n                                </ion-item>\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.dob.errors?.required">\r\n                                    {{"DOB_Full" | translate}} {{"Req" | translate}}\r\n                                </ion-label>\r\n                                <ion-text color="danger" *ngIf="errorAddNomineeControl.dob.errors?.dobValidator">\r\n                                    {{"DOB_Full" | translate}} {{"NotValid" | translate}}\r\n                                </ion-text>\r\n                            </ion-col>\r\n                        </ion-row>\r\n\r\n\r\n                        <ion-row>\r\n                            <ion-col size=12 size-xl="4" *ngIf="deviceSize">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>{{"Gender" | translate}}</ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size=12 size-xl="8">\r\n                                <ion-item lines="full" mode="md">\r\n                                    <ion-radio-group value="Gender" formControlName="gender">\r\n                                        <ion-row>\r\n                                            <ion-col>\r\n                                                <ion-item lines="none" class="ion-no-padding">\r\n                                                    <ion-label>{{"Male" | translate}}</ion-label>\r\n                                                    <ion-radio [attr.disabled]="otp" slot="start" value="M" required></ion-radio>\r\n                                                </ion-item>\r\n                                            </ion-col>\r\n                                            <ion-col>\r\n                                                <ion-item lines="none" class="ion-no-padding">\r\n                                                    <ion-label>{{"Female" | translate}}</ion-label>\r\n                                                    <ion-radio [attr.disabled]="otp" slot="start" value="F" required></ion-radio>\r\n                                                </ion-item>\r\n                                            </ion-col>\r\n                                            <ion-col>\r\n                                                <ion-item lines="none" class="ion-no-padding">\r\n                                                    <ion-label>{{"Other" | translate}}</ion-label>\r\n                                                    <ion-radio [attr.disabled]="otp" slot="start" value="O" required></ion-radio>\r\n                                                </ion-item>\r\n                                            </ion-col>\r\n                                        </ion-row>\r\n\r\n\r\n                                    </ion-radio-group>\r\n                                </ion-item>\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.gender.errors?.required">\r\n                                    {{"Gender" | translate}} {{"Req" | translate}}\r\n                                </ion-label>\r\n                            </ion-col>\r\n                        </ion-row>\r\n\r\n\r\n\r\n                        <ion-row>\r\n                            <ion-col size=12 size-xl="4" *ngIf="deviceSize">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>{{"Nominee" | translate}} {{"Mobile" | translate}}</ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size=12 size-xl="8">\r\n                                <ion-item lines="full" mode="md">\r\n                                    <ion-label position="floating" *ngIf="!deviceSize">{{"Nominee" | translate}} {{"Mobile" | translate}}</ion-label>\r\n                                    <ion-input (keypress)="ajax.numberOnlyValidation($event)" [attr.disabled]="otp" maxlength="10" minlength="10" formControlName="mobile" type="text" required></ion-input>\r\n                                </ion-item>\r\n\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.mobile.errors?.required">\r\n                                    {{"Mobile" | translate}} {{"NotValid" | translate}}\r\n                                </ion-label>\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.mobile.errors?.pattern">\r\n                                    {{"OnlyNumbers" | translate}}\r\n                                </ion-label>\r\n                            </ion-col>\r\n                        </ion-row>\r\n\r\n\r\n                        <ion-row>\r\n                            <ion-col size-xl="4" size="12" *ngIf="deviceSize">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>{{"Email" | translate}} <small>({{"optional" | translate}})</small></ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size-xl="8" size="12">\r\n                                <ion-item lines="full" mode="md">\r\n                                    <ion-label position="floating" *ngIf="!deviceSize">{{"Email" | translate}} </ion-label>\r\n                                    <ion-input [attr.disabled]="otp" maxlength="255" pattern="[A-Za-z0-9.%+-]{2,}@[a-zA-Z-.]{2,}[.]{1}[a-zA-Z]{2,}" formControlName="email" type="email"></ion-input>\r\n                                </ion-item>\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.email.errors?.required">\r\n                                    {{"Email" | translate}} {{"Req" | translate}}\r\n                                </ion-label>\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.email.errors?.pattern">\r\n                                    {{"ValEmail" | translate}}\r\n                                </ion-label>\r\n                            </ion-col>\r\n                        </ion-row>\r\n\r\n\r\n                        <ion-row>\r\n                            <ion-col size-xl="4" size="12" *ngIf="deviceSize">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>{{"Nominee" | translate}} {{"Aadhaar" | translate}}</ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size-xl="8" size=12>\r\n                                <ion-item lines="full" mode="md">\r\n                                    <ion-label position="floating" *ngIf="!deviceSize">{{"Nominee" | translate}} {{"Aadhaar" | translate}} </ion-label>\r\n                                    <ion-input (keypress)="ajax.numberOnlyValidation($event)" [attr.disabled]="otp" maxlength="12" minlength="12" formControlName="uid" type="text" required></ion-input>\r\n                                </ion-item>\r\n\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.uid.errors?.required">\r\n                                    {{"Aadhaar" | translate}} {{"Req" | translate}}\r\n                                </ion-label>\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.uid.errors?.pattern">\r\n                                    {{"OnlyNumbers" | translate}}\r\n                                </ion-label>\r\n                            </ion-col>\r\n                        </ion-row>\r\n\r\n\r\n\r\n                        <ion-row>\r\n                            <ion-col size-xl="4" size="12" *ngIf="deviceSize">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>{{"Relationship" | translate}}</ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size-xl="8" size=12>\r\n                                <ion-item lines="full" mode="md">\r\n                                    <ion-select mode="ios" placeholder=" Select Relationship" [attr.disabled]="otp" interface="popover" formControlName="relation" required>\r\n                                        <ion-select-option value="father" checked="true">{{"Father" | translate}}</ion-select-option>\r\n                                        <ion-select-option value="mother">{{"Mother" | translate}}</ion-select-option>\r\n                                        <ion-select-option value="spouse">{{"Spouse" | translate}}</ion-select-option>\r\n                                        <ion-select-option value="son">{{"Son" | translate}}</ion-select-option>\r\n                                        <ion-select-option value="daughter">{{"Daughter" | translate}}</ion-select-option>\r\n                                        <ion-select-option value="brother">{{"Brother" | translate}}</ion-select-option>\r\n                                        <ion-select-option value="sister">{{"Sister" | translate}}</ion-select-option>\r\n                                    </ion-select>\r\n                                </ion-item>\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.relation.errors?.required">\r\n                                    {{"Relation" | translate}} {{"Req" | translate}}\r\n                                </ion-label>\r\n                            </ion-col>\r\n\r\n                        </ion-row>\r\n\r\n                        <ion-row *ngIf="otp">\r\n                            <ion-col size-xl="4" size="12">\r\n                                <ion-item lines="none">\r\n                                    <ion-label></ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size-xl="8" size="12">\r\n                                <ion-item lines="none" class="no-padding-start">\r\n                                    <ion-badge color="{{(respMsg.status==\'success\')?\'success\':\'danger\'}}" *ngIf="respMsg" class="ion-padding ion-text-wrap" mode="ios">\r\n                                        {{(respMsg.status==\'success\')?respMsg.msg:respMsg.error_description}}\r\n                                    </ion-badge>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                        </ion-row>\r\n\r\n                        <ion-row *ngIf="otp">\r\n                            <ion-col size-xl="4" size="12" *ngIf="deviceSize">\r\n                                <ion-item lines="none">\r\n                                    <ion-label>{{"OTP" | translate}}</ion-label>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                            <ion-col size-xl="8" size="12">\r\n\r\n                                <ion-item lines="full" mode="md">\r\n                                    <ion-label position="floating" *ngIf="!deviceSize">{{"OTP" | translate}} </ion-label>\r\n                                    <ion-input (keypress)="ajax.numberOnlyValidation($event) " maxlength="6 " minlength="6 " formControlName="otp" type="{{otpShow? \'text\': \'password\'}}" #otp></ion-input>\r\n                                    <ion-icon class="cursor" *ngIf="!errorAddNomineeControl.otp.pristine" (click)="changeType(\'otp\') " color="{{otpShow? \'primary\': \'dark\'}}" name="{{otpShow? \'eye\': \'eye-off\'}}" slot="end"></ion-icon>\r\n                                </ion-item>\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.otp.errors?.required">\r\n                                    {{"OTP" | translate}} {{"Req" | translate}}\r\n                                </ion-label>\r\n                                <ion-label color="danger" *ngIf="isSubmitted && errorAddNomineeControl.otp.errors?.pattern">\r\n                                    {{"OnlyNumbers" | translate}}\r\n                                </ion-label>\r\n                                <ion-label color="danger" *ngIf="isSubmitted && (errorAddNomineeControl.otp.errors?.maxlength || errorAddNomineeControl.otp.errors?.minlength) ">\r\n                                    {{"OTPLength" | translate}}\r\n                                </ion-label>\r\n\r\n\r\n                                \x3c!-- <ion-row>\r\n                                    <ion-col>\r\n                                        <ion-label color="{{(respMsg.status==\'success\' )? \'success\': \'danger\'}} " *ngIf="respMsg ">\r\n                                            {{(respMsg.status==\'success\')?respMsg.msg:respMsg.error_description}}\r\n                                        </ion-label>\r\n                                    </ion-col>\r\n                                </ion-row> --\x3e\r\n                                <ion-row>\r\n                                    <ion-col>\r\n                                        <ion-text *ngIf="otp">\r\n                                            {{(maxTime>0)?\'Wait for the OTP, if not received try resend otp after \'+maxTime+\' sec\':\'\'}}\r\n                                            <ion-button *ngIf="maxTime==0 " (click)="sendOTP() " color="primary " fill="clear " size="small " class="cursor ">Resend OTP</ion-button>\r\n                                        </ion-text>\r\n                                    </ion-col>\r\n                                </ion-row>\r\n                            </ion-col>\r\n                        </ion-row>\r\n\r\n                        <ion-row *ngIf="!otp ">\r\n                            <ion-col>\r\n                                <ion-item lines="none" class="no-padding-start">\r\n                                    <ion-badge color="{{(respMsg.status==\'success\' )? \'success\': \'danger\'}} " *ngIf="respMsg" class="ion-padding" mode="ios">\r\n                                        {{(respMsg.status==\'success\')?respMsg.msg:respMsg.error_description}}\r\n                                    </ion-badge>\r\n                                </ion-item>\r\n                            </ion-col>\r\n                        </ion-row>\r\n\r\n\r\n                        <ion-row>\r\n                            <ion-col>\r\n                                <ion-button class="ion-float-right " type="submit " color="primary " expand="block ">{{"Submit" | translate}}</ion-button>\r\n                            </ion-col>\r\n                        </ion-row>\r\n\r\n\r\n                    </form>\r\n                </ion-card>\r\n            </ion-col>\r\n        </ion-row>\r\n    </ion-grid>\r\n\r\n</ion-content>\r\n'},UJ48:function(e,n,o){"use strict";o.r(n),o.d(n,"AddNomineePageModule",(function(){return h}));var i=o("mrSG"),r=o("fXoL"),t=o("ofXK"),a=o("3Pt+"),l=o("sYmb"),s=o("TEn/"),d=o("tyNb"),m=o("sRcL"),c=o("AytR"),u=o("jhN1");let b=class{constructor(e,n,o,i,r,t){var a;this.navCtlr=e,this.formBuilder=n,this.ajax=o,this.router=i,this.platform=r,this.titleService=t,this.deviceSize=this.platform.isLandscape(),this.verifyOTPFormShow=!1,this.isSubmitted=!1,this.respMsg=null,this.maxTime=30,this.minDate=new Date("1900-01-01").toLocaleDateString("en-CA"),this.maxDate=(new Date).toLocaleDateString("en-CA"),this.otp=!1,this.profile=null===(a=this.router.getCurrentNavigation())||void 0===a?void 0:a.extras.state,this.otpShow=!1}ngAfterViewChecked(){this.addNomineeForm.controls.name.valid||setTimeout(()=>{this.nameElement.setFocus()},500),this.addNomineeForm.controls.otp.valid||setTimeout(()=>{this.otpElement.setFocus()},500)}ionViewDidEnter(){this.titleService.setTitle("Add Nominee")}ngOnInit(){this.validationAddNomineeArray={name:[{value:"",disabled:!1},[a.f.required,a.f.pattern("[A-Za-z? ]+$")]],dob:[{value:"",disabled:!1},[a.f.required]],gender:[{value:"",disabled:!1},[a.f.required]],mobile:[{value:"",disabled:!1},[a.f.required,a.f.pattern("[5-9]{1}[0-9]{9}"),a.f.minLength(10),a.f.maxLength(10),a.f.pattern("[0-9]+$")]],email:[{value:"",disabled:!1},[a.f.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],uid:[{value:"",disabled:!1},[a.f.required,a.f.minLength(12),a.f.maxLength(12),a.f.pattern("[0-9]+$")]],relation:[{value:"",disabled:!1},[a.f.required]],otp:[{value:"",disabled:!1},[]]},this.addNomineeForm=this.formBuilder.group(this.validationAddNomineeArray,{validator:this.DobValidator("dob")}),null==this.profile&&this.navCtlr.back()}changeType(e){this.otpShow=!this.otpShow}DobValidator(e){return n=>{const o=n.controls[e];o.errors&&!o.errors.dobValidator||(this.maxDate>o.value&&this.minDate<o.value?o.setErrors(null):o.setErrors({dobValidator:!0}))}}sendOTP(){this.respMsg=null,this.isSubmitted=!1,this.ajax.showLoader(""),this.ajax.postMethod(c.a.add_nominee_send_otp,encodeURI("mobile="+this.profile.mobile),{}).subscribe(e=>{this.ajax.hideLoader(),this.respMsg=e,"success"==e.status&&(this.StartTimer(),this.otp=!0,this.validationFormFunct(!0),this.ngAfterViewChecked())})}get errorAddNomineeControl(){return this.addNomineeForm.controls}submitVerifyOTPForm(){if(this.isSubmitted=!0,this.respMsg=null,!this.addNomineeForm.valid)return!1;this.ajax.showLoader(),this.ajax.postMethod(c.a.add_nominee_verify_otp,encodeURI("mobile="+this.profile.mobile+"&otp="+this.addNomineeForm.value.otp),{}).subscribe(e=>{if(this.ajax.hideLoader(),this.isSubmitted=!1,e.msg="OTP verified sucessfully.",this.respMsg=e,"success"==e.status){this.ajax.showLoader();let e=this.addNomineeForm.value.dob;e=e.toString().split("-");let n=encodeURI("name="+this.addNomineeForm.value.name+"&dob="+e[2]+e[1]+e[0]+"&gender="+this.addNomineeForm.value.gender+"&mobileno="+this.addNomineeForm.value.mobile+"&uid="+this.addNomineeForm.value.uid+"&relation="+this.addNomineeForm.value.relation+"&username="+this.profile.user_name+"&email="+this.addNomineeForm.value.email);this.ajax.postMethod(c.a.add_nominee,n,{}).subscribe(e=>{this.ajax.hideLoader(),"success"==e.status?(e.msg="Nominee added successfully.",this.ajax.showToast(e.msg,3e3,"success","bottom"),this.dismiss()):(this.validationFormFunct(!1),this.otp=!1),this.respMsg=e})}})}validationFormFunct(e=!0){let n=e?[a.f.required,a.f.pattern("^[0-9]+$"),a.f.maxLength(6),a.f.minLength(6)]:[];this.validationAddNomineeArray.name=[{value:this.addNomineeForm.get("name").value,disabled:!1},[a.f.required,a.f.pattern("[A-Za-z0-9? ]+$")]],this.validationAddNomineeArray.dob=[{value:this.addNomineeForm.get("dob").value,disabled:!1},[a.f.required]],this.validationAddNomineeArray.gender=[{value:this.addNomineeForm.get("gender").value,disabled:!1},[a.f.required]],this.validationAddNomineeArray.mobile=[{value:this.addNomineeForm.get("mobile").value,disabled:!1},[a.f.required,a.f.minLength(10),a.f.maxLength(10),a.f.pattern("[0-9]+$")]],this.validationAddNomineeArray.email=[{value:this.addNomineeForm.get("email").value,disabled:!1},[a.f.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],this.validationAddNomineeArray.uid=[{value:this.addNomineeForm.get("uid").value,disabled:!1},[a.f.required,a.f.minLength(12),a.f.maxLength(12),a.f.pattern("[0-9]+$")]],this.validationAddNomineeArray.relation=[{value:this.addNomineeForm.get("relation").value,disabled:!1},[a.f.required]],this.validationAddNomineeArray.otp=[{value:"",disabled:!1},n],this.addNomineeForm=this.formBuilder.group(this.validationAddNomineeArray,{validator:this.DobValidator("dob")})}submitAddNomineeForm(){if(this.isSubmitted=!0,!this.addNomineeForm.valid)return!1;this.addNomineeForm.value.otp?this.submitVerifyOTPForm():this.sendOTP()}getDate(e){let n=new Date(e.target.value).toISOString().substring(0,10);this.addNomineeForm.get("dob").setValue(n,{onlyself:!0})}dismiss(){this.navCtlr.back()}StartTimer(){setTimeout(e=>{this.maxTime>0&&(this.StartTimer(),this.maxTime=this.maxTime-1)},1e3)}};b.ctorParameters=()=>[{type:s.i},{type:a.a},{type:m.a},{type:d.g},{type:s.k},{type:u.d}],Object(i.c)([Object(r.nb)("name")],b.prototype,"nameElement",void 0),Object(i.c)([Object(r.nb)("otp")],b.prototype,"otpElement",void 0),b=Object(i.c)([Object(r.n)({selector:"app-add-nominee",template:Object(i.f)(o("TMau")).default,styles:[Object(i.f)(o("JATV")).default]})],b);const p=[{path:"",component:b}];let g=class{};g=Object(i.c)([Object(r.M)({imports:[d.i.forChild(p)],exports:[d.i]})],g);let h=class{};h=Object(i.c)([Object(r.M)({imports:[t.b,a.b,a.e,s.d,g,l.b.forChild()],declarations:[b]})],h)}}]);